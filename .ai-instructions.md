# AI Development Instructions for ihr360-xxx-static

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Rsbuild + React 18 + TypeScript + Redux + single-spa + Tailwind CSS v4 + shadcn-ui** çš„å¾®å‰ç«¯å­åº”ç”¨é¡¹ç›®ã€‚


## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯
- **æ„å»ºå·¥å…·**: Rsbuild 1.5.4 (åŸºäº Rspack)
- **æ¡†æ¶**: React 18.2.0 + TypeScript 5.9.2
- **çŠ¶æ€ç®¡ç†**: Redux 5.0.1 + Redux Thunk
- **è·¯ç”±**: React Router DOM 6.22.3
- **å¾®å‰ç«¯**: single-spa 6.0.2
- **å›½é™…åŒ–**: irs-react-intl

### UI æŠ€æœ¯æ ˆ
- **Tailwind CSS**: v4.1.18 (ä½¿ç”¨ @import "tailwindcss" è¯­æ³•)
- **shadcn-ui**: ç»„ä»¶æºç åœ¨ src/components/ui/
- **ä¸»é¢˜è‰²**: #26c2a4 (HSL: 167 66% 45%)
- **å›¾æ ‡**: lucide-react

### å…³é”®ä¾èµ–
- @tailwindcss/postcss: ^4.1.18
- @sentry/browser: ^10.32.1
- irs-tools: 6.1.5-beta
- lodash-es: ^4.17.22

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                    # shadcn-ui ç»„ä»¶ (å¯ä¿®æ”¹)
â”‚   â”‚   â”œâ”€â”€ spinner.tsx       # è‡ªå®šä¹‰åŠ è½½ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ...               # å…¶ä»– shadcn-ui ç»„ä»¶
â”‚   â”œâ”€â”€ ErrorBoundary.tsx     # é”™è¯¯è¾¹ç•Œ (Sentry é›†æˆ)
â”‚   â”œâ”€â”€ HeadNav.tsx           # é¡¶éƒ¨å¯¼èˆª
â”‚   â”œâ”€â”€ LeftNav.tsx           # ä¾§è¾¹å¯¼èˆª
â”‚   â””â”€â”€ layout.tsx            # å¸ƒå±€ç¤ºä¾‹
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ home/
â”‚       â””â”€â”€ index.tsx         # é¦–é¡µ
â”œâ”€â”€ router/
â”‚   â”œâ”€â”€ index.tsx             # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ routerConfig.tsx      # è·¯ç”±æ˜ å°„
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ utils.ts              # å·¥å…·å‡½æ•° (cn ç­‰)
â”œâ”€â”€ constants/
â”‚   â””â”€â”€ actionsTypes.ts       # Redux action å¸¸é‡
â”œâ”€â”€ locale/                    # å›½é™…åŒ–é…ç½®
â”œâ”€â”€ index.css                 # å…¨å±€æ ·å¼ (Tailwind CSS v4)
â””â”€â”€ index.tsx                 # åº”ç”¨å…¥å£

é…ç½®æ–‡ä»¶:
â”œâ”€â”€ rsbuild.config.ts         # Rsbuild é…ç½®
â”œâ”€â”€ postcss.config.js         # PostCSS é…ç½®
â”œâ”€â”€ tailwind.config.js        # Tailwind é…ç½®
â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®
â””â”€â”€ components.json           # shadcn-ui é…ç½®
```

## ğŸ¨ UI å¼€å‘è§„èŒƒ

### 1. ä½¿ç”¨ Tailwind CSS å·¥å…·ç±» (é¦–é€‰)

**âœ… æ­£ç¡®åšæ³•:**
```tsx
function MyComponent() {
  return (
    <div className="flex items-center gap-4 p-6 bg-white rounded-lg shadow-md">
      <h2 className="text-2xl font-bold text-gray-900">æ ‡é¢˜</h2>
      <button className="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors">
        æŒ‰é’®
      </button>
    </div>
  );
}
```

**âŒ é”™è¯¯åšæ³•:**
```tsx
// âŒ ä¸è¦ä½¿ç”¨å†…è”æ ·å¼
<div style={{ display: 'flex', padding: '24px' }}>

// âŒ ä¸è¦åˆ›å»ºå•ç‹¬çš„ CSS æ–‡ä»¶
import './MyComponent.css';

// âŒ ä¸è¦ä½¿ç”¨ @apply æŒ‡ä»¤ (Tailwind v4 æ”¯æŒæœ‰é™)
.my-class {
  @apply flex items-center; /* é¿å…ä½¿ç”¨ */
}
```

### 2. ä½¿ç”¨ä¸»é¢˜è‰²å’Œ CSS å˜é‡

é¡¹ç›®ä¸»é¢˜è‰²ä¸º `#26c2a4`,é€šè¿‡ CSS å˜é‡é…ç½®åœ¨ [src/index.css](src/index.css:6-42)

**å¯ç”¨çš„é¢œè‰²å·¥å…·ç±»:**
- `bg-primary` / `text-primary` - ä¸»é¢˜è‰²
- `bg-secondary` / `text-secondary` - æ¬¡è¦è‰²
- `bg-destructive` / `text-destructive` - é”™è¯¯/å±é™©è‰²
- `bg-muted` / `text-muted` - é™éŸ³/ç¦ç”¨è‰²
- `bg-accent` / `text-accent` - å¼ºè°ƒè‰²
- `bg-background` / `text-foreground` - èƒŒæ™¯/å‰æ™¯è‰²
- `border-border` - è¾¹æ¡†è‰²

**ä½¿ç”¨ç¤ºä¾‹:**
```tsx
<button className="bg-primary text-primary-foreground hover:bg-primary/90">
  ä¸»é¢˜è‰²æŒ‰é’®
</button>

<div className="border border-border bg-muted text-muted-foreground">
  é™éŸ³çŠ¶æ€
</div>
```

**ç›´æ¥ä½¿ç”¨ CSS å˜é‡ (ç‰¹æ®Šåœºæ™¯):**
```tsx
<div style={{ backgroundColor: 'hsl(var(--primary))' }}>
  è‡ªå®šä¹‰ä½¿ç”¨ä¸»é¢˜è‰²
</div>
```

### 3. æ·»åŠ  shadcn-ui ç»„ä»¶

å½“éœ€è¦å¤æ‚äº¤äº’ç»„ä»¶æ—¶,ä½¿ç”¨ shadcn-ui:

```bash
# å®‰è£…ç»„ä»¶ (ä¼šå¤åˆ¶åˆ° src/components/ui/)
pnpm dlx shadcn@latest add button
pnpm dlx shadcn@latest add dialog
pnpm dlx shadcn@latest add form
pnpm dlx shadcn@latest add table
```

**ä½¿ç”¨ç¤ºä¾‹:**
```tsx
import { Button } from '@/components/ui/button';
import { Dialog, DialogContent, DialogTrigger } from '@/components/ui/dialog';

function Feature() {
  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button variant="outline">æ‰“å¼€</Button>
      </DialogTrigger>
      <DialogContent>
        <h2 className="text-xl font-semibold">å¯¹è¯æ¡†</h2>
      </DialogContent>
    </Dialog>
  );
}
```

### 4. å“åº”å¼è®¾è®¡

ä½¿ç”¨ Tailwind çš„æ–­ç‚¹å‰ç¼€:

```tsx
<div className="
  w-full sm:w-1/2 md:w-1/3 lg:w-1/4
  px-4 md:px-6 lg:px-8
  text-sm md:text-base lg:text-lg
">
  å“åº”å¼å†…å®¹
</div>
```

**æ–­ç‚¹:**
- `sm:` - â‰¥640px
- `md:` - â‰¥768px
- `lg:` - â‰¥1024px
- `xl:` - â‰¥1280px
- `2xl:` - â‰¥1536px

## ğŸš« é‡è¦çº¦æŸ

### ç¦æ­¢çš„æ“ä½œ

1. **âŒ ä¸è¦å¼•å…¥ antd4 æˆ– ihr360-web-ui3**
   ```tsx
   // âŒ ç¦æ­¢
   import { Button } from 'antd4';
   import { IrsButton } from 'ihr360-web-ui3';

   // âœ… ä½¿ç”¨
   import { Button } from '@/components/ui/button';
   // æˆ–ç›´æ¥ä½¿ç”¨ Tailwind ç±»å
   <button className="px-4 py-2 bg-primary ...">æŒ‰é’®</button>
   ```

2. **âŒ ä¸è¦ä½¿ç”¨ Less æˆ–åˆ›å»º CSS æ–‡ä»¶**
   ```tsx
   // âŒ ç¦æ­¢
   import './MyComponent.less';
   import './MyComponent.css';

   // âœ… ä½¿ç”¨ Tailwind ç±»å
   <div className="p-4 bg-white rounded-lg">...</div>
   ```

3. **âŒ ä¸è¦è¿‡åº¦ä½¿ç”¨ @apply**
   ```css
   /* âŒ é¿å…åœ¨ Tailwind v4 ä¸­ä½¿ç”¨ */
   .my-button {
     @apply px-4 py-2 bg-primary;
   }

   /* âœ… ç›´æ¥åœ¨ JSX ä¸­ä½¿ç”¨å·¥å…·ç±» */
   ```

4. **âŒ ä¸è¦ä¿®æ”¹æ ¸å¿ƒé…ç½®æ–‡ä»¶ (é™¤éæ˜ç¡®è¦æ±‚)**
   - tailwind.config.js
   - postcss.config.js
   - rsbuild.config.ts
   - src/index.css (å…¨å±€æ ·å¼éƒ¨åˆ†)

## ğŸ“ å¼€å‘æ¨¡å¼

### ç»„ä»¶å¼€å‘æ¨¡æ¿

**ç®€å•ç»„ä»¶ - ç›´æ¥ä½¿ç”¨ Tailwind:**
```tsx
interface CardProps {
  title: string;
  content: string;
}

export function Card({ title, content }: CardProps) {
  return (
    <div className="p-6 bg-white rounded-lg shadow hover:shadow-md transition-shadow">
      <h3 className="text-lg font-semibold mb-2">{title}</h3>
      <p className="text-gray-600">{content}</p>
    </div>
  );
}
```

**å¤æ‚ç»„ä»¶ - ä½¿ç”¨ CVA (Class Variance Authority):**
```tsx
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '@/lib/utils';

const cardVariants = cva(
  'p-6 rounded-lg transition-shadow',
  {
    variants: {
      variant: {
        default: 'bg-white shadow',
        bordered: 'border border-border',
        ghost: 'bg-transparent',
      },
      size: {
        sm: 'p-4',
        md: 'p-6',
        lg: 'p-8',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'md',
    },
  }
);

interface CardProps extends VariantProps<typeof cardVariants> {
  className?: string;
  children: React.ReactNode;
}

export function Card({ className, variant, size, children }: CardProps) {
  return (
    <div className={cn(cardVariants({ variant, size }), className)}>
      {children}
    </div>
  );
}
```

### è·¯å¾„å¯¼å…¥è§„èŒƒ

ä½¿ç”¨ `@/` åˆ«åå¯¼å…¥:

```tsx
// âœ… æ­£ç¡®
import { Button } from '@/components/ui/button';
import { cn } from '@/lib/utils';
import { GET_EASY_DATA } from '@/constants/actionsTypes';

// âŒ é¿å…ç›¸å¯¹è·¯å¾„
import { Button } from '../../components/ui/button';
```

### å›½é™…åŒ–ä½¿ç”¨

```tsx
import { FormattedMessage } from 'irs-react-intl';

function MyComponent() {
  return (
    <div>
      <FormattedMessage
        id="IRS_DICT.cnb_salary_common_attention"
        defaultMessage="æç¤º"
      />
    </div>
  );
}
```

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm start

# æ„å»º (QA/Beta/Prod)
pnpm run build:QA
pnpm run build:Beta
pnpm run build:Prod

# å®‰è£… shadcn-ui ç»„ä»¶
pnpm dlx shadcn@latest add [component-name]
```

## ğŸ¯ å¼€å‘ä¼˜å…ˆçº§

1. **ä¼˜å…ˆä½¿ç”¨ Tailwind å·¥å…·ç±»** - ç®€å•ã€å¿«é€Ÿã€ä¸€è‡´
2. **éœ€è¦å¤æ‚äº¤äº’æ—¶ä½¿ç”¨ shadcn-ui** - å¯å®šåˆ¶çš„é«˜è´¨é‡ç»„ä»¶
3. **ä½¿ç”¨ CVA å¤„ç†å˜ä½“** - ç»„ä»¶æœ‰å¤šä¸ªæ ·å¼å˜ä½“æ—¶
4. **ç›´æ¥ CSS ä½œä¸ºæœ€åæ‰‹æ®µ** - ä»…åœ¨ Tailwind æ— æ³•å®ç°æ—¶

## ğŸ“ ä»£ç é£æ ¼

- **ç»„ä»¶**: ä½¿ç”¨å‡½æ•°ç»„ä»¶ + Hooks (ä¼˜å…ˆ) æˆ–ç±»ç»„ä»¶ (ç°æœ‰ä»£ç )
- **ç±»å‹**: ä½¿ç”¨ TypeScript interface å®šä¹‰ props
- **ç±»ååˆå¹¶**: ä½¿ç”¨ `cn()` å·¥å…·å‡½æ•°
- **æ ¼å¼åŒ–**: éµå¾ªé¡¹ç›® ESLint å’Œ Prettier é…ç½®

## ğŸ”— å‚è€ƒèµ„æº

- Tailwind CSS v4: https://tailwindcss.com/docs
- shadcn-ui: https://ui.shadcn.com/docs/components
- Lucide Icons: https://lucide.dev/icons

## âš ï¸ å¾®å‰ç«¯ç‰¹æ®Šè¯´æ˜

æ­¤é¡¹ç›®æ˜¯ single-spa å¾®å‰ç«¯å­åº”ç”¨:

1. **ä¿æŒ CSS å˜é‡å…¼å®¹**: `--singlespa-frame-ant4-primary-color` å¿…é¡»ä¿ç•™
2. **é¿å…å…¨å±€æ ·å¼æ±¡æŸ“**: ä½¿ç”¨ Tailwind çš„ scoped ç‰¹æ€§
3. **UMD æ‰“åŒ…**: é¡¹ç›®ä½¿ç”¨ UMD æ ¼å¼æ‰“åŒ…,æ³¨æ„å¤–éƒ¨ä¾èµ–é…ç½®

## ğŸ“‹ AI å¼€å‘æ£€æŸ¥æ¸…å•

åœ¨ç¼–å†™ä»£ç å‰,ç¡®è®¤:

- [ ] ä½¿ç”¨ Tailwind CSS å·¥å…·ç±»è€Œéå†…è”æ ·å¼æˆ– CSS æ–‡ä»¶
- [ ] ä½¿ç”¨ `@/` è·¯å¾„åˆ«åå¯¼å…¥
- [ ] ç»„ä»¶ä½¿ç”¨ TypeScript ç±»å‹å®šä¹‰
- [ ] å¤æ‚äº¤äº’ä½¿ç”¨ shadcn-ui ç»„ä»¶
- [ ] å“åº”å¼è®¾è®¡ä½¿ç”¨æ–­ç‚¹å‰ç¼€
- [ ] ä¸»é¢˜è‰²ä½¿ç”¨ CSS å˜é‡ç±»å (bg-primary ç­‰)
- [ ] ç±»ååˆå¹¶ä½¿ç”¨ `cn()` å‡½æ•°
- [ ] ä¸å¼•å…¥ antd4 æˆ– ihr360-web-ui3
- [ ] ä¸åˆ›å»ºæ–°çš„ CSS/Less æ–‡ä»¶

---

**æœ€åæ›´æ–°**: 2025-12-24
**é¡¹ç›®ç»´æŠ¤è€…**: Mike.Cai
